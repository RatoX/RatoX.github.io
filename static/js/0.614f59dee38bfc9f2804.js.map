{"version":3,"sources":["webpack:///src/components/tools/ImageResizer.vue","webpack:///./src/components/tools/ImageResizer.vue?3f55","webpack:///./src/components/tools/ImageResizer.vue","webpack:///./node_modules/pica/dist/pica.js"],"names":["ImageResizer_pica","pica_default","ImageResizer","name","data","original","size","dimension","type","newFile","width","height","loading","image","reducePercent","computed","newDimension","concat","this","methods","updateNewDimensions","percent","_this$image","newWidth","Math","ceil","newHeight","reduceIt","_this","resize","$refs","canvas","unsharpAmount","unsharpRadius","unsharpThreshold","then","result","toBlob","str","arr","extension","downloadUrl","URL","createObjectURL","a","downloadLink","fileData","split","pop","join","href","download","toLowerCase","replace","slug","click","window","revokeObjectURL","changeImage","_ref","_this2","file","target","files","bytes","decimals","dm","i","floor","log","parseFloat","pow","toFixed","formatBytes","reader","FileReader","onload","event","img","Image","src","readAsDataURL","tools_ImageResizer","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","id","accept","disabled","on","change","_v","for","_s","directives","rawName","value","expression","min","max","domProps","input","__r","$event","ref","_e","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__","require","f","r","e","n","t","o","u","Error","code","p","exports","call","length","1","module","inherits","Multimath","mm_unsharp_mask","mm_resize","MathLib","requested_features","__requested_features","features","js","indexOf","wasm","has_wasm","use","prototype","resizeAndUnsharp","options","cache","unsharp_mask","toWidth","toHeight","./mm_resize","multimath","multimath/lib/unsharp_mask","2","clampTo8","convolveHorizontally","dest","srcW","srcH","destW","filters","g","b","filterPtr","filterShift","filterSize","srcPtr","srcY","destX","filterVal","srcOffset","destOffset","convolveVertically","3","4","fn","wasm_fn","wasm_src","./convolve_wasm_base64","./resize","./resize_wasm","5","createFilters","destH","scaleX","scaleY","offsetX","offsetY","Uint8Array","quality","alpha","filtersX","filtersY","tmp","dst","ptr","len","resetAlpha","./convolve","./resize_filter_gen","6","FILTER_INFO","FIXED_FRAC_BITS","toFixedPoint","num","round","srcSize","destSize","scale","offset","destPixel","srcPixel","srcFirst","srcLast","filterElementSize","floatFilter","fxpFilter","total","pxl","idx","floatVal","filterTotal","leftNotEmpty","rightNotEmpty","filterFunction","filter","scaleInverted","scaleClamped","srcWindow","win","maxFilterElementSize","packedFilter","Int16Array","packedFilterPtr","slowCopy","subarray","set","Float32Array","./resize_filter_info","7","x","xpi","PI","sin","cos","8","IS_LE","Uint32Array","buffer","__","copyInt16asLE","target_offset","byteLength","asUint8Array","tmp_offset","__align","filtersX_offset","filtersY_offset","alloc_bytes","instance","__instance","mem","__memory","mem32","src32","convolveHV","_convolveHV","9","Pool","create","idle","available","acquired","lastId","timeoutId","acquire","resource","release","lastUsed","Date","now","push","setTimeout","gc","_this3","destroy","10","fromWidth","fromHeight","srcTileSize","destTileBorder","minScale","stageCount","11","PIXEL_EPSILON","pixelFloor","nearest","abs","pixelCeil","y","innerX","innerY","toTileWidth","toTileHeight","innerTileWidth","innerTileHeight","tile","tiles","toX","toY","toInnerX","toInnerY","toInnerWidth","toInnerHeight","12","objClass","obj","Object","toString","isCanvas","element","cname","isImage","limiter","concurrency","active","queue","roll","shift","Promise","resolve","reject","err","cib_quality_name","cib_support","createImageBitmap","document","c","createElement","resizeWidth","resizeHeight","resizeQuality","bitmap","status","close","catch","13","mathLib","onmessage","ev","opts","postMessage","./mathlib","14","a0","a1","a2","a3","b1","b2","convolveMono16","out","line","coeff","prev_src","curr_src","curr_out","prev_out","prev_prev_out","src_index","out_index","line_index","j","coeff_a0","coeff_a1","coeff_b1","coeff_b2","radius","Uint16Array","tmp_line","sigma","exp","g1","g2","k","gaussCoef","15","ctor","superCtor","super_","constructor","enumerable","writable","configurable","TempCtor","16","assign","base64decode","hasWebAssembly","DEFAULT_OPTIONS","MultiMath","__cache","__init_promise","__modules","modules","__wasm","__isLE","init","self","all","keys","map","WebAssembly","compile","__base64decode","m","__reallocate","Memory","initial","mem_size","grow","memsize","env_extra","Module","env_base","memoryBase","memory","tableBase","table","Table","Instance","env","number","base","reminder","./lib/base64decode","./lib/wa_detect","object-assign","17","bits","charAt","tailbits","18","19","./unsharp_mask","./unsharp_mask_wasm","./unsharp_mask_wasm_base64","20","glur_mono16","hsl_l16","amount","threshold","h","s","l","m1","m2","hShifted","diff","iTimes4","lightness","blured","amountFp","thresholdFp","./hsl_l16","glur/mono16","21","pixels","img_bytes_cnt","hsl_bytes_cnt","blur_bytes_cnt","blur_line_byte_cnt","hsl_offset","blur_offset","blur_tmp_offset","blur_line_offset","blur_coeffs_offset","img32","_hsl_l16","blurMono16","_blurMono16","unsharp","_unsharp","22","23","wa","bin","test","24","getOwnPropertySymbols","hasOwnProperty","propIsEnumerable","propertyIsEnumerable","test1","String","getOwnPropertyNames","test2","fromCharCode","test3","forEach","letter","shouldUseNative","source","from","symbols","to","val","undefined","TypeError","toObject","arguments","key","25","bundleFn","sources","stringify","JSON","wkey","cacheKeys","default","random","wcache","skey","scache","workerSources","resolveSources","depPath","depKey","webkitURL","mozURL","msURL","blob","Blob","bare","workerUrl","worker","Worker","objectURL","/","_slicedToArray","Array","isArray","_arrayWithHoles","_arr","_n","_d","_i","Symbol","iterator","next","done","_iterableToArrayLimit","_nonIterableRest","webworkify","utils","createStages","createRegions","singletones","NEED_SAFARI_FIX","navigator","userAgent","hardwareConcurrency","CAN_NEW_IMAGE_DATA","CAN_CREATE_IMAGE_BITMAP","DEFAULT_PICA_OPTS","DEFAULT_RESIZE_OPTS","workerFabric","terminate","url","Pica","limiter_key","__limit","cib","ww","__workersPool","__mathlib","__initPromise","ImageData","Uint8ClampedArray","ImageBitmap","debug","slice","wpool_key","checkCibResize","initMath","mathlib","isNaN","naturalWidth","naturalHeight","canceled","cancelToken","toCtx","getContext","Boolean","imageBitmap","drawImage","tmpCanvas","tmpCtx","iData","getImageData","putImageData","tileAndResize","srcCtx","srcImageBitmap","processTile","srcImageData","globalCompositeOperation","w","preload","wasm_nodule","toImageData","createImageData","jobs","cleanup","processStages","stages","_stages$shift2","isLastStage","resizeBuffer","mimeType","asString","atob","toDataURL","asBuffer","charCodeAt","./lib/mathlib","./lib/pool","./lib/stepper","./lib/tiler","./lib/utils","./lib/worker"],"mappings":"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","file":"static/js/0.614f59dee38bfc9f2804.js","sourcesContent":["<template>\n  <div class=\"image-resizer\">\n    <input type=\"file\"\n           id=\"image\"\n           @change=\"changeImage\"\n           accept=\"image/*\"\n           :disabled=\"loading\"\n           name=\"image\"/>\n    <section\n      v-if=\"image\"\n      class=\"image-resizer__resizer\">\n      <section class=\"image-resizer__original-details\">\n        <label for=\"originalSize\">Original size: </label>\n        <output for=\"image\" name=\"originalSize\">\n          {{ original.size }}\n        </output>\n\n        <label for=\"originalDimension\">Original dimension: </label>\n        <output for=\"image\" name=\"originalDimension\">\n          {{ original.dimension }}\n        </output>\n      </section>\n      <section class=\"image-resizer__new-details\">\n        <label for=\"newDimension\">New dimension: </label>\n        <output for=\"image\" name=\"newDimension\">\n          {{ newDimension }}\n        </output>\n      </section>\n      <input\n        type=\"range\"\n        id=\"reducePercent\"\n        name=\"reducePercent\"\n        min=\"0\" max=\"90\"\n        v-model=\"reducePercent\"\n        v-on:change=\"updateNewDimensions\"\n        v-on:input=\"updateNewDimensions\"\n        />\n      <button v-on:click=\"reduceIt\">Reduce it!</button>\n      <a class=\"image-resizer__download\" ref=\"downloadLink\" href=\"#\">Download it!</a>\n      <canvas\n        class=\"image-resizer__result\"\n        ref=\"canvas\"\n        :width=\"newFile.width\"\n        :height=\"newFile.height\"\n        ></canvas>\n    </section>\n  </div>\n</template>\n\n<script>\nimport Pica from 'pica';\n\nconst pica = Pica();\n\nfunction formatBytes(bytes, decimals) {\n  // https://stackoverflow.com/a/18650828\n  if (bytes === 0) return '0 Bytes';\n  const k = 1024;\n  const dm = decimals <= 0 ? 0 : decimals || 2;\n  const sizes = ['Bytes', 'KB', 'MB', 'GB', 'TB', 'PB', 'EB', 'ZB', 'YB'];\n  const i = Math.floor(Math.log(bytes) / Math.log(k));\n\n  return `${parseFloat((bytes / (k ** i)).toFixed(dm))} ${sizes[i]}`;\n}\n\nfunction slug(str) {\n  return str\n    .toLowerCase()\n    .replace(/[^\\w ]+/g, '')\n    .replace(/ +/g, '-');\n}\n\nfunction extractFilenameAndExtension(str) {\n  const arr = str.split('.');\n  const extension = arr.pop();\n  const filename = arr.join('');\n\n  return [filename, extension];\n}\n\nexport default {\n  name: 'ImageResizer',\n  data() {\n    return {\n      original: {\n        size: '',\n        dimension: '',\n        type: '',\n        name: '',\n      },\n      newFile: {\n        width: '0',\n        height: '0',\n      },\n      loading: false,\n      image: null,\n      reducePercent: 90,\n    };\n  },\n  computed: {\n    newDimension() {\n      return `${this.reducePercent}% ${this.newFile.width}x${this.newFile.height}`;\n    },\n  },\n  methods: {\n    updateNewDimensions() {\n      const percent = this.reducePercent;\n      const { width, height } = this.image;\n      const newWidth = Math.ceil(width - (width * (percent / 100)));\n      const newHeight = Math.ceil(height - (height * (percent / 100)));\n\n      this.newFile.width = newWidth;\n      this.newFile.height = newHeight;\n    },\n    reduceIt() {\n      pica\n        .resize(this.image, this.$refs.canvas, {\n          unsharpAmount: 80,\n          unsharpRadius: 0.6,\n          unsharpThreshold: 2,\n        })\n        .then(result => pica.toBlob(result, this.original.type))\n        .then((result) => {\n          const downloadUrl = URL.createObjectURL(result);\n          const a = this.$refs.downloadLink;\n          const fileData = extractFilenameAndExtension(this.original.name);\n\n          a.href = downloadUrl;\n          a.download = `${slug(fileData[0])}.${fileData[1]}`;\n          a.click();\n          window.URL.revokeObjectURL(downloadUrl);\n        });\n    },\n\n    changeImage({ target }) {\n      const file = target.files[0];\n      const size = formatBytes(file.size);\n\n      this.original.name = file.name;\n      this.original.type = file.type;\n      this.original.size = size;\n      this.loading = true;\n      const reader = new FileReader();\n\n      reader.onload = (event) => {\n        const img = new Image();\n        img.onload = () => {\n          const dimension = `${img.width}x${img.height}`;\n          this.original.dimension = dimension;\n          this.image = img;\n          this.loading = false;\n          this.updateNewDimensions();\n        };\n        img.src = event.target.result;\n      };\n\n      reader.readAsDataURL(file);\n    },\n  },\n};\n</script>\n\n<style scoped>\n.image-resizer {\n  width: 100%;\n}\n\n.image-resizer__resizer {\n  display: flex;\n  flex-direction: column;\n  width: 100%;\n}\n\n.image-resizer__download {\n  display: none;\n}\n\n.image-resizer__result {\n  display: none;\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/tools/ImageResizer.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"image-resizer\"},[_c('input',{attrs:{\"type\":\"file\",\"id\":\"image\",\"accept\":\"image/*\",\"disabled\":_vm.loading,\"name\":\"image\"},on:{\"change\":_vm.changeImage}}),_vm._v(\" \"),(_vm.image)?_c('section',{staticClass:\"image-resizer__resizer\"},[_c('section',{staticClass:\"image-resizer__original-details\"},[_c('label',{attrs:{\"for\":\"originalSize\"}},[_vm._v(\"Original size: \")]),_vm._v(\" \"),_c('output',{attrs:{\"for\":\"image\",\"name\":\"originalSize\"}},[_vm._v(\"\\n        \"+_vm._s(_vm.original.size)+\"\\n      \")]),_vm._v(\" \"),_c('label',{attrs:{\"for\":\"originalDimension\"}},[_vm._v(\"Original dimension: \")]),_vm._v(\" \"),_c('output',{attrs:{\"for\":\"image\",\"name\":\"originalDimension\"}},[_vm._v(\"\\n        \"+_vm._s(_vm.original.dimension)+\"\\n      \")])]),_vm._v(\" \"),_c('section',{staticClass:\"image-resizer__new-details\"},[_c('label',{attrs:{\"for\":\"newDimension\"}},[_vm._v(\"New dimension: \")]),_vm._v(\" \"),_c('output',{attrs:{\"for\":\"image\",\"name\":\"newDimension\"}},[_vm._v(\"\\n        \"+_vm._s(_vm.newDimension)+\"\\n      \")])]),_vm._v(\" \"),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.reducePercent),expression:\"reducePercent\"}],attrs:{\"type\":\"range\",\"id\":\"reducePercent\",\"name\":\"reducePercent\",\"min\":\"0\",\"max\":\"90\"},domProps:{\"value\":(_vm.reducePercent)},on:{\"change\":_vm.updateNewDimensions,\"input\":_vm.updateNewDimensions,\"__r\":function($event){_vm.reducePercent=$event.target.value}}}),_vm._v(\" \"),_c('button',{on:{\"click\":_vm.reduceIt}},[_vm._v(\"Reduce it!\")]),_vm._v(\" \"),_c('a',{ref:\"downloadLink\",staticClass:\"image-resizer__download\",attrs:{\"href\":\"#\"}},[_vm._v(\"Download it!\")]),_vm._v(\" \"),_c('canvas',{ref:\"canvas\",staticClass:\"image-resizer__result\",attrs:{\"width\":_vm.newFile.width,\"height\":_vm.newFile.height}})]):_vm._e()])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-7da14e21\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/tools/ImageResizer.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-7da14e21\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./ImageResizer.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./ImageResizer.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./ImageResizer.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-7da14e21\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./ImageResizer.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-7da14e21\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/tools/ImageResizer.vue\n// module id = null\n// module chunks = ","/* pica 5.0.0 nodeca/pica */(function(f){if(typeof exports===\"object\"&&typeof module!==\"undefined\"){module.exports=f()}else if(typeof define===\"function\"&&define.amd){define([],f)}else{var g;if(typeof window!==\"undefined\"){g=window}else if(typeof global!==\"undefined\"){g=global}else if(typeof self!==\"undefined\"){g=self}else{g=this}g.pica = f()}})(function(){var define,module,exports;return (function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){\n// Collection of math functions\n//\n// 1. Combine components together\n// 2. Has async init to load wasm modules\n//\n'use strict';\n\nvar inherits = require('inherits');\n\nvar Multimath = require('multimath');\n\nvar mm_unsharp_mask = require('multimath/lib/unsharp_mask');\n\nvar mm_resize = require('./mm_resize');\n\nfunction MathLib(requested_features) {\n  var __requested_features = requested_features || [];\n\n  var features = {\n    js: __requested_features.indexOf('js') >= 0,\n    wasm: __requested_features.indexOf('wasm') >= 0\n  };\n  Multimath.call(this, features);\n  this.features = {\n    js: features.js,\n    wasm: features.wasm && this.has_wasm\n  };\n  this.use(mm_unsharp_mask);\n  this.use(mm_resize);\n}\n\ninherits(MathLib, Multimath);\n\nMathLib.prototype.resizeAndUnsharp = function resizeAndUnsharp(options, cache) {\n  var result = this.resize(options, cache);\n\n  if (options.unsharpAmount) {\n    this.unsharp_mask(result, options.toWidth, options.toHeight, options.unsharpAmount, options.unsharpRadius, options.unsharpThreshold);\n  }\n\n  return result;\n};\n\nmodule.exports = MathLib;\n\n},{\"./mm_resize\":4,\"inherits\":15,\"multimath\":16,\"multimath/lib/unsharp_mask\":19}],2:[function(require,module,exports){\n// Resize convolvers, pure JS implementation\n//\n'use strict'; // Precision of fixed FP values\n//var FIXED_FRAC_BITS = 14;\n\nfunction clampTo8(i) {\n  return i < 0 ? 0 : i > 255 ? 255 : i;\n} // Convolve image in horizontal directions and transpose output. In theory,\n// transpose allow:\n//\n// - use the same convolver for both passes (this fails due different\n//   types of input array and temporary buffer)\n// - making vertical pass by horisonltal lines inprove CPU cache use.\n//\n// But in real life this doesn't work :)\n//\n\n\nfunction convolveHorizontally(src, dest, srcW, srcH, destW, filters) {\n  var r, g, b, a;\n  var filterPtr, filterShift, filterSize;\n  var srcPtr, srcY, destX, filterVal;\n  var srcOffset = 0,\n      destOffset = 0; // For each row\n\n  for (srcY = 0; srcY < srcH; srcY++) {\n    filterPtr = 0; // Apply precomputed filters to each destination row point\n\n    for (destX = 0; destX < destW; destX++) {\n      // Get the filter that determines the current output pixel.\n      filterShift = filters[filterPtr++];\n      filterSize = filters[filterPtr++];\n      srcPtr = srcOffset + filterShift * 4 | 0;\n      r = g = b = a = 0; // Apply the filter to the row to get the destination pixel r, g, b, a\n\n      for (; filterSize > 0; filterSize--) {\n        filterVal = filters[filterPtr++]; // Use reverse order to workaround deopts in old v8 (node v.10)\n        // Big thanks to @mraleph (Vyacheslav Egorov) for the tip.\n\n        a = a + filterVal * src[srcPtr + 3] | 0;\n        b = b + filterVal * src[srcPtr + 2] | 0;\n        g = g + filterVal * src[srcPtr + 1] | 0;\n        r = r + filterVal * src[srcPtr] | 0;\n        srcPtr = srcPtr + 4 | 0;\n      } // Bring this value back in range. All of the filter scaling factors\n      // are in fixed point with FIXED_FRAC_BITS bits of fractional part.\n      //\n      // (!) Add 1/2 of value before clamping to get proper rounding. In other\n      // case brightness loss will be noticeable if you resize image with white\n      // border and place it on white background.\n      //\n\n\n      dest[destOffset + 3] = clampTo8(a + (1 << 13) >> 14\n      /*FIXED_FRAC_BITS*/\n      );\n      dest[destOffset + 2] = clampTo8(b + (1 << 13) >> 14\n      /*FIXED_FRAC_BITS*/\n      );\n      dest[destOffset + 1] = clampTo8(g + (1 << 13) >> 14\n      /*FIXED_FRAC_BITS*/\n      );\n      dest[destOffset] = clampTo8(r + (1 << 13) >> 14\n      /*FIXED_FRAC_BITS*/\n      );\n      destOffset = destOffset + srcH * 4 | 0;\n    }\n\n    destOffset = (srcY + 1) * 4 | 0;\n    srcOffset = (srcY + 1) * srcW * 4 | 0;\n  }\n} // Technically, convolvers are the same. But input array and temporary\n// buffer can be of different type (especially, in old browsers). So,\n// keep code in separate functions to avoid deoptimizations & speed loss.\n\n\nfunction convolveVertically(src, dest, srcW, srcH, destW, filters) {\n  var r, g, b, a;\n  var filterPtr, filterShift, filterSize;\n  var srcPtr, srcY, destX, filterVal;\n  var srcOffset = 0,\n      destOffset = 0; // For each row\n\n  for (srcY = 0; srcY < srcH; srcY++) {\n    filterPtr = 0; // Apply precomputed filters to each destination row point\n\n    for (destX = 0; destX < destW; destX++) {\n      // Get the filter that determines the current output pixel.\n      filterShift = filters[filterPtr++];\n      filterSize = filters[filterPtr++];\n      srcPtr = srcOffset + filterShift * 4 | 0;\n      r = g = b = a = 0; // Apply the filter to the row to get the destination pixel r, g, b, a\n\n      for (; filterSize > 0; filterSize--) {\n        filterVal = filters[filterPtr++]; // Use reverse order to workaround deopts in old v8 (node v.10)\n        // Big thanks to @mraleph (Vyacheslav Egorov) for the tip.\n\n        a = a + filterVal * src[srcPtr + 3] | 0;\n        b = b + filterVal * src[srcPtr + 2] | 0;\n        g = g + filterVal * src[srcPtr + 1] | 0;\n        r = r + filterVal * src[srcPtr] | 0;\n        srcPtr = srcPtr + 4 | 0;\n      } // Bring this value back in range. All of the filter scaling factors\n      // are in fixed point with FIXED_FRAC_BITS bits of fractional part.\n      //\n      // (!) Add 1/2 of value before clamping to get proper rounding. In other\n      // case brightness loss will be noticeable if you resize image with white\n      // border and place it on white background.\n      //\n\n\n      dest[destOffset + 3] = clampTo8(a + (1 << 13) >> 14\n      /*FIXED_FRAC_BITS*/\n      );\n      dest[destOffset + 2] = clampTo8(b + (1 << 13) >> 14\n      /*FIXED_FRAC_BITS*/\n      );\n      dest[destOffset + 1] = clampTo8(g + (1 << 13) >> 14\n      /*FIXED_FRAC_BITS*/\n      );\n      dest[destOffset] = clampTo8(r + (1 << 13) >> 14\n      /*FIXED_FRAC_BITS*/\n      );\n      destOffset = destOffset + srcH * 4 | 0;\n    }\n\n    destOffset = (srcY + 1) * 4 | 0;\n    srcOffset = (srcY + 1) * srcW * 4 | 0;\n  }\n}\n\nmodule.exports = {\n  convolveHorizontally: convolveHorizontally,\n  convolveVertically: convolveVertically\n};\n\n},{}],3:[function(require,module,exports){\n// This is autogenerated file from math.wasm, don't edit.\n//\n'use strict';\n/* eslint-disable max-len */\n\nmodule.exports = 'AGFzbQEAAAABFAJgBn9/f39/fwBgB39/f39/f38AAg8BA2VudgZtZW1vcnkCAAEDAwIAAQQEAXAAAAcZAghjb252b2x2ZQAACmNvbnZvbHZlSFYAAQkBAArmAwLBAwEQfwJAIANFDQAgBEUNACAFQQRqIRVBACEMQQAhDQNAIA0hDkEAIRFBACEHA0AgB0ECaiESAn8gBSAHQQF0IgdqIgZBAmouAQAiEwRAQQAhCEEAIBNrIRQgFSAHaiEPIAAgDCAGLgEAakECdGohEEEAIQlBACEKQQAhCwNAIBAoAgAiB0EYdiAPLgEAIgZsIAtqIQsgB0H/AXEgBmwgCGohCCAHQRB2Qf8BcSAGbCAKaiEKIAdBCHZB/wFxIAZsIAlqIQkgD0ECaiEPIBBBBGohECAUQQFqIhQNAAsgEiATagwBC0EAIQtBACEKQQAhCUEAIQggEgshByABIA5BAnRqIApBgMAAakEOdSIGQf8BIAZB/wFIG0EQdEGAgPwHcUEAIAZBAEobIAtBgMAAakEOdSIGQf8BIAZB/wFIG0EYdEEAIAZBAEobciAJQYDAAGpBDnUiBkH/ASAGQf8BSBtBCHRBgP4DcUEAIAZBAEobciAIQYDAAGpBDnUiBkH/ASAGQf8BSBtB/wFxQQAgBkEAShtyNgIAIA4gA2ohDiARQQFqIhEgBEcNAAsgDCACaiEMIA1BAWoiDSADRw0ACwsLIQACQEEAIAIgAyAEIAUgABAAIAJBACAEIAUgBiABEAALCw==';\n\n},{}],4:[function(require,module,exports){\n'use strict';\n\nmodule.exports = {\n  name: 'resize',\n  fn: require('./resize'),\n  wasm_fn: require('./resize_wasm'),\n  wasm_src: require('./convolve_wasm_base64')\n};\n\n},{\"./convolve_wasm_base64\":3,\"./resize\":5,\"./resize_wasm\":8}],5:[function(require,module,exports){\n'use strict';\n\nvar createFilters = require('./resize_filter_gen');\n\nvar convolveHorizontally = require('./convolve').convolveHorizontally;\n\nvar convolveVertically = require('./convolve').convolveVertically;\n\nfunction resetAlpha(dst, width, height) {\n  var ptr = 3,\n      len = width * height * 4 | 0;\n\n  while (ptr < len) {\n    dst[ptr] = 0xFF;\n    ptr = ptr + 4 | 0;\n  }\n}\n\nmodule.exports = function resize(options) {\n  var src = options.src;\n  var srcW = options.width;\n  var srcH = options.height;\n  var destW = options.toWidth;\n  var destH = options.toHeight;\n  var scaleX = options.scaleX || options.toWidth / options.width;\n  var scaleY = options.scaleY || options.toHeight / options.height;\n  var offsetX = options.offsetX || 0;\n  var offsetY = options.offsetY || 0;\n  var dest = options.dest || new Uint8Array(destW * destH * 4);\n  var quality = typeof options.quality === 'undefined' ? 3 : options.quality;\n  var alpha = options.alpha || false;\n  var filtersX = createFilters(quality, srcW, destW, scaleX, offsetX),\n      filtersY = createFilters(quality, srcH, destH, scaleY, offsetY);\n  var tmp = new Uint8Array(destW * srcH * 4); // To use single function we need src & tmp of the same type.\n  // But src can be CanvasPixelArray, and tmp - Uint8Array. So, keep\n  // vertical and horizontal passes separately to avoid deoptimization.\n\n  convolveHorizontally(src, tmp, srcW, srcH, destW, filtersX);\n  convolveVertically(tmp, dest, srcH, destW, destH, filtersY); // That's faster than doing checks in convolver.\n  // !!! Note, canvas data is not premultipled. We don't need other\n  // alpha corrections.\n\n  if (!alpha) resetAlpha(dest, destW, destH);\n  return dest;\n};\n\n},{\"./convolve\":2,\"./resize_filter_gen\":6}],6:[function(require,module,exports){\n// Calculate convolution filters for each destination point,\n// and pack data to Int16Array:\n//\n// [ shift, length, data..., shift2, length2, data..., ... ]\n//\n// - shift - offset in src image\n// - length - filter length (in src points)\n// - data - filter values sequence\n//\n'use strict';\n\nvar FILTER_INFO = require('./resize_filter_info'); // Precision of fixed FP values\n\n\nvar FIXED_FRAC_BITS = 14;\n\nfunction toFixedPoint(num) {\n  return Math.round(num * ((1 << FIXED_FRAC_BITS) - 1));\n}\n\nmodule.exports = function resizeFilterGen(quality, srcSize, destSize, scale, offset) {\n  var filterFunction = FILTER_INFO[quality].filter;\n  var scaleInverted = 1.0 / scale;\n  var scaleClamped = Math.min(1.0, scale); // For upscale\n  // Filter window (averaging interval), scaled to src image\n\n  var srcWindow = FILTER_INFO[quality].win / scaleClamped;\n  var destPixel, srcPixel, srcFirst, srcLast, filterElementSize, floatFilter, fxpFilter, total, pxl, idx, floatVal, filterTotal, filterVal;\n  var leftNotEmpty, rightNotEmpty, filterShift, filterSize;\n  var maxFilterElementSize = Math.floor((srcWindow + 1) * 2);\n  var packedFilter = new Int16Array((maxFilterElementSize + 2) * destSize);\n  var packedFilterPtr = 0;\n  var slowCopy = !packedFilter.subarray || !packedFilter.set; // For each destination pixel calculate source range and built filter values\n\n  for (destPixel = 0; destPixel < destSize; destPixel++) {\n    // Scaling should be done relative to central pixel point\n    srcPixel = (destPixel + 0.5) * scaleInverted + offset;\n    srcFirst = Math.max(0, Math.floor(srcPixel - srcWindow));\n    srcLast = Math.min(srcSize - 1, Math.ceil(srcPixel + srcWindow));\n    filterElementSize = srcLast - srcFirst + 1;\n    floatFilter = new Float32Array(filterElementSize);\n    fxpFilter = new Int16Array(filterElementSize);\n    total = 0.0; // Fill filter values for calculated range\n\n    for (pxl = srcFirst, idx = 0; pxl <= srcLast; pxl++, idx++) {\n      floatVal = filterFunction((pxl + 0.5 - srcPixel) * scaleClamped);\n      total += floatVal;\n      floatFilter[idx] = floatVal;\n    } // Normalize filter, convert to fixed point and accumulate conversion error\n\n\n    filterTotal = 0;\n\n    for (idx = 0; idx < floatFilter.length; idx++) {\n      filterVal = floatFilter[idx] / total;\n      filterTotal += filterVal;\n      fxpFilter[idx] = toFixedPoint(filterVal);\n    } // Compensate normalization error, to minimize brightness drift\n\n\n    fxpFilter[destSize >> 1] += toFixedPoint(1.0 - filterTotal); //\n    // Now pack filter to useable form\n    //\n    // 1. Trim heading and tailing zero values, and compensate shitf/length\n    // 2. Put all to single array in this format:\n    //\n    //    [ pos shift, data length, value1, value2, value3, ... ]\n    //\n\n    leftNotEmpty = 0;\n\n    while (leftNotEmpty < fxpFilter.length && fxpFilter[leftNotEmpty] === 0) {\n      leftNotEmpty++;\n    }\n\n    if (leftNotEmpty < fxpFilter.length) {\n      rightNotEmpty = fxpFilter.length - 1;\n\n      while (rightNotEmpty > 0 && fxpFilter[rightNotEmpty] === 0) {\n        rightNotEmpty--;\n      }\n\n      filterShift = srcFirst + leftNotEmpty;\n      filterSize = rightNotEmpty - leftNotEmpty + 1;\n      packedFilter[packedFilterPtr++] = filterShift; // shift\n\n      packedFilter[packedFilterPtr++] = filterSize; // size\n\n      if (!slowCopy) {\n        packedFilter.set(fxpFilter.subarray(leftNotEmpty, rightNotEmpty + 1), packedFilterPtr);\n        packedFilterPtr += filterSize;\n      } else {\n        // fallback for old IE < 11, without subarray/set methods\n        for (idx = leftNotEmpty; idx <= rightNotEmpty; idx++) {\n          packedFilter[packedFilterPtr++] = fxpFilter[idx];\n        }\n      }\n    } else {\n      // zero data, write header only\n      packedFilter[packedFilterPtr++] = 0; // shift\n\n      packedFilter[packedFilterPtr++] = 0; // size\n    }\n  }\n\n  return packedFilter;\n};\n\n},{\"./resize_filter_info\":7}],7:[function(require,module,exports){\n// Filter definitions to build tables for\n// resizing convolvers.\n//\n// Presets for quality 0..3. Filter functions + window size\n//\n'use strict';\n\nmodule.exports = [{\n  // Nearest neibor (Box)\n  win: 0.5,\n  filter: function filter(x) {\n    return x >= -0.5 && x < 0.5 ? 1.0 : 0.0;\n  }\n}, {\n  // Hamming\n  win: 1.0,\n  filter: function filter(x) {\n    if (x <= -1.0 || x >= 1.0) {\n      return 0.0;\n    }\n\n    if (x > -1.19209290E-07 && x < 1.19209290E-07) {\n      return 1.0;\n    }\n\n    var xpi = x * Math.PI;\n    return Math.sin(xpi) / xpi * (0.54 + 0.46 * Math.cos(xpi / 1.0));\n  }\n}, {\n  // Lanczos, win = 2\n  win: 2.0,\n  filter: function filter(x) {\n    if (x <= -2.0 || x >= 2.0) {\n      return 0.0;\n    }\n\n    if (x > -1.19209290E-07 && x < 1.19209290E-07) {\n      return 1.0;\n    }\n\n    var xpi = x * Math.PI;\n    return Math.sin(xpi) / xpi * Math.sin(xpi / 2.0) / (xpi / 2.0);\n  }\n}, {\n  // Lanczos, win = 3\n  win: 3.0,\n  filter: function filter(x) {\n    if (x <= -3.0 || x >= 3.0) {\n      return 0.0;\n    }\n\n    if (x > -1.19209290E-07 && x < 1.19209290E-07) {\n      return 1.0;\n    }\n\n    var xpi = x * Math.PI;\n    return Math.sin(xpi) / xpi * Math.sin(xpi / 3.0) / (xpi / 3.0);\n  }\n}];\n\n},{}],8:[function(require,module,exports){\n'use strict';\n\nvar createFilters = require('./resize_filter_gen');\n\nfunction resetAlpha(dst, width, height) {\n  var ptr = 3,\n      len = width * height * 4 | 0;\n\n  while (ptr < len) {\n    dst[ptr] = 0xFF;\n    ptr = ptr + 4 | 0;\n  }\n}\n\nfunction asUint8Array(src) {\n  return new Uint8Array(src.buffer, 0, src.byteLength);\n}\n\nvar IS_LE = true; // should not crash everything on module load in old browsers\n\ntry {\n  IS_LE = new Uint32Array(new Uint8Array([1, 0, 0, 0]).buffer)[0] === 1;\n} catch (__) {}\n\nfunction copyInt16asLE(src, target, target_offset) {\n  if (IS_LE) {\n    target.set(asUint8Array(src), target_offset);\n    return;\n  }\n\n  for (var ptr = target_offset, i = 0; i < src.length; i++) {\n    var data = src[i];\n    target[ptr++] = data & 0xFF;\n    target[ptr++] = data >> 8 & 0xFF;\n  }\n}\n\nmodule.exports = function resize_wasm(options) {\n  var src = options.src;\n  var srcW = options.width;\n  var srcH = options.height;\n  var destW = options.toWidth;\n  var destH = options.toHeight;\n  var scaleX = options.scaleX || options.toWidth / options.width;\n  var scaleY = options.scaleY || options.toHeight / options.height;\n  var offsetX = options.offsetX || 0.0;\n  var offsetY = options.offsetY || 0.0;\n  var dest = options.dest || new Uint8Array(destW * destH * 4);\n  var quality = typeof options.quality === 'undefined' ? 3 : options.quality;\n  var alpha = options.alpha || false;\n  var filtersX = createFilters(quality, srcW, destW, scaleX, offsetX),\n      filtersY = createFilters(quality, srcH, destH, scaleY, offsetY); // destination is 0 too.\n\n  var src_offset = 0; // buffer between convolve passes\n\n  var tmp_offset = this.__align(src_offset + Math.max(src.byteLength, dest.byteLength));\n\n  var filtersX_offset = this.__align(tmp_offset + srcH * destW * 4);\n\n  var filtersY_offset = this.__align(filtersX_offset + filtersX.byteLength);\n\n  var alloc_bytes = filtersY_offset + filtersY.byteLength;\n\n  var instance = this.__instance('resize', alloc_bytes); //\n  // Fill memory block with data to process\n  //\n\n\n  var mem = new Uint8Array(this.__memory.buffer);\n  var mem32 = new Uint32Array(this.__memory.buffer); // 32-bit copy is much faster in chrome\n\n  var src32 = new Uint32Array(src.buffer);\n  mem32.set(src32); // We should guarantee LE bytes order. Filters are not big, so\n  // speed difference is not significant vs direct .set()\n\n  copyInt16asLE(filtersX, mem, filtersX_offset);\n  copyInt16asLE(filtersY, mem, filtersY_offset); //\n  // Now call webassembly method\n  // emsdk does method names with '_'\n\n  var fn = instance.exports.convolveHV || instance.exports._convolveHV;\n  fn(filtersX_offset, filtersY_offset, tmp_offset, srcW, srcH, destW, destH); //\n  // Copy data back to typed array\n  //\n  // 32-bit copy is much faster in chrome\n\n  var dest32 = new Uint32Array(dest.buffer);\n  dest32.set(new Uint32Array(this.__memory.buffer, 0, destH * destW)); // That's faster than doing checks in convolver.\n  // !!! Note, canvas data is not premultipled. We don't need other\n  // alpha corrections.\n\n  if (!alpha) resetAlpha(dest, destW, destH);\n  return dest;\n};\n\n},{\"./resize_filter_gen\":6}],9:[function(require,module,exports){\n'use strict';\n\nvar GC_INTERVAL = 100;\n\nfunction Pool(create, idle) {\n  this.create = create;\n  this.available = [];\n  this.acquired = {};\n  this.lastId = 1;\n  this.timeoutId = 0;\n  this.idle = idle || 2000;\n}\n\nPool.prototype.acquire = function () {\n  var _this = this;\n\n  var resource;\n\n  if (this.available.length !== 0) {\n    resource = this.available.pop();\n  } else {\n    resource = this.create();\n    resource.id = this.lastId++;\n\n    resource.release = function () {\n      return _this.release(resource);\n    };\n  }\n\n  this.acquired[resource.id] = resource;\n  return resource;\n};\n\nPool.prototype.release = function (resource) {\n  var _this2 = this;\n\n  delete this.acquired[resource.id];\n  resource.lastUsed = Date.now();\n  this.available.push(resource);\n\n  if (this.timeoutId === 0) {\n    this.timeoutId = setTimeout(function () {\n      return _this2.gc();\n    }, GC_INTERVAL);\n  }\n};\n\nPool.prototype.gc = function () {\n  var _this3 = this;\n\n  var now = Date.now();\n  this.available = this.available.filter(function (resource) {\n    if (now - resource.lastUsed > _this3.idle) {\n      resource.destroy();\n      return false;\n    }\n\n    return true;\n  });\n\n  if (this.available.length !== 0) {\n    this.timeoutId = setTimeout(function () {\n      return _this3.gc();\n    }, GC_INTERVAL);\n  } else {\n    this.timeoutId = 0;\n  }\n};\n\nmodule.exports = Pool;\n\n},{}],10:[function(require,module,exports){\n// Add intermediate resizing steps when scaling down by a very large factor.\n//\n// For example, when resizing 10000x10000 down to 10x10, it'll resize it to\n// 300x300 first.\n//\n// It's needed because tiler has issues when the entire tile is scaled down\n// to a few pixels (1024px source tile with border size 3 should result in\n// at least 3+3+2 = 8px target tile, so max scale factor is 128 here).\n//\n// Also, adding intermediate steps can speed up processing if we use lower\n// quality algorithms for first stages.\n//\n'use strict'; // min size = 0 results in infinite loop,\n// min size = 1 can consume large amount of memory\n\nvar MIN_INNER_TILE_SIZE = 2;\n\nmodule.exports = function createStages(fromWidth, fromHeight, toWidth, toHeight, srcTileSize, destTileBorder) {\n  var scaleX = toWidth / fromWidth;\n  var scaleY = toHeight / fromHeight; // derived from createRegions equation:\n  // innerTileWidth = pixelFloor(srcTileSize * scaleX) - 2 * destTileBorder;\n\n  var minScale = (2 * destTileBorder + MIN_INNER_TILE_SIZE + 1) / srcTileSize; // refuse to scale image multiple times by less than twice each time,\n  // it could only happen because of invalid options\n\n  if (minScale > 0.5) return [[toWidth, toHeight]];\n  var stageCount = Math.ceil(Math.log(Math.min(scaleX, scaleY)) / Math.log(minScale)); // no additional resizes are necessary,\n  // stageCount can be zero or be negative when enlarging the image\n\n  if (stageCount <= 1) return [[toWidth, toHeight]];\n  var result = [];\n\n  for (var i = 0; i < stageCount; i++) {\n    var width = Math.round(Math.pow(Math.pow(fromWidth, stageCount - i - 1) * Math.pow(toWidth, i + 1), 1 / stageCount));\n    var height = Math.round(Math.pow(Math.pow(fromHeight, stageCount - i - 1) * Math.pow(toHeight, i + 1), 1 / stageCount));\n    result.push([width, height]);\n  }\n\n  return result;\n};\n\n},{}],11:[function(require,module,exports){\n// Split original image into multiple 1024x1024 chunks to reduce memory usage\n// (images have to be unpacked into typed arrays for resizing) and allow\n// parallel processing of multiple tiles at a time.\n//\n'use strict';\n/*\n * pixelFloor and pixelCeil are modified versions of Math.floor and Math.ceil\n * functions which take into account floating point arithmetic errors.\n * Those errors can cause undesired increments/decrements of sizes and offsets:\n * Math.ceil(36 / (36 / 500)) = 501\n * pixelCeil(36 / (36 / 500)) = 500\n */\n\nvar PIXEL_EPSILON = 1e-5;\n\nfunction pixelFloor(x) {\n  var nearest = Math.round(x);\n\n  if (Math.abs(x - nearest) < PIXEL_EPSILON) {\n    return nearest;\n  }\n\n  return Math.floor(x);\n}\n\nfunction pixelCeil(x) {\n  var nearest = Math.round(x);\n\n  if (Math.abs(x - nearest) < PIXEL_EPSILON) {\n    return nearest;\n  }\n\n  return Math.ceil(x);\n}\n\nmodule.exports = function createRegions(options) {\n  var scaleX = options.toWidth / options.width;\n  var scaleY = options.toHeight / options.height;\n  var innerTileWidth = pixelFloor(options.srcTileSize * scaleX) - 2 * options.destTileBorder;\n  var innerTileHeight = pixelFloor(options.srcTileSize * scaleY) - 2 * options.destTileBorder; // prevent infinite loop, this should never happen\n\n  if (innerTileWidth < 1 || innerTileHeight < 1) {\n    throw new Error('Internal error in pica: target tile width/height is too small.');\n  }\n\n  var x, y;\n  var innerX, innerY, toTileWidth, toTileHeight;\n  var tiles = [];\n  var tile; // we go top-to-down instead of left-to-right to make image displayed from top to\n  // doesn in the browser\n\n  for (innerY = 0; innerY < options.toHeight; innerY += innerTileHeight) {\n    for (innerX = 0; innerX < options.toWidth; innerX += innerTileWidth) {\n      x = innerX - options.destTileBorder;\n\n      if (x < 0) {\n        x = 0;\n      }\n\n      toTileWidth = innerX + innerTileWidth + options.destTileBorder - x;\n\n      if (x + toTileWidth >= options.toWidth) {\n        toTileWidth = options.toWidth - x;\n      }\n\n      y = innerY - options.destTileBorder;\n\n      if (y < 0) {\n        y = 0;\n      }\n\n      toTileHeight = innerY + innerTileHeight + options.destTileBorder - y;\n\n      if (y + toTileHeight >= options.toHeight) {\n        toTileHeight = options.toHeight - y;\n      }\n\n      tile = {\n        toX: x,\n        toY: y,\n        toWidth: toTileWidth,\n        toHeight: toTileHeight,\n        toInnerX: innerX,\n        toInnerY: innerY,\n        toInnerWidth: innerTileWidth,\n        toInnerHeight: innerTileHeight,\n        offsetX: x / scaleX - pixelFloor(x / scaleX),\n        offsetY: y / scaleY - pixelFloor(y / scaleY),\n        scaleX: scaleX,\n        scaleY: scaleY,\n        x: pixelFloor(x / scaleX),\n        y: pixelFloor(y / scaleY),\n        width: pixelCeil(toTileWidth / scaleX),\n        height: pixelCeil(toTileHeight / scaleY)\n      };\n      tiles.push(tile);\n    }\n  }\n\n  return tiles;\n};\n\n},{}],12:[function(require,module,exports){\n'use strict';\n\nfunction objClass(obj) {\n  return Object.prototype.toString.call(obj);\n}\n\nmodule.exports.isCanvas = function isCanvas(element) {\n  //return (element.nodeName && element.nodeName.toLowerCase() === 'canvas') ||\n  var cname = objClass(element);\n  return cname === '[object HTMLCanvasElement]'\n  /* browser */\n  || cname === '[object Canvas]'\n  /* node-canvas */\n  ;\n};\n\nmodule.exports.isImage = function isImage(element) {\n  //return element.nodeName && element.nodeName.toLowerCase() === 'img';\n  return objClass(element) === '[object HTMLImageElement]';\n};\n\nmodule.exports.limiter = function limiter(concurrency) {\n  var active = 0,\n      queue = [];\n\n  function roll() {\n    if (active < concurrency && queue.length) {\n      active++;\n      queue.shift()();\n    }\n  }\n\n  return function limit(fn) {\n    return new Promise(function (resolve, reject) {\n      queue.push(function () {\n        fn().then(function (result) {\n          resolve(result);\n          active--;\n          roll();\n        }, function (err) {\n          reject(err);\n          active--;\n          roll();\n        });\n      });\n      roll();\n    });\n  };\n};\n\nmodule.exports.cib_quality_name = function cib_quality_name(num) {\n  switch (num) {\n    case 0:\n      return 'pixelated';\n\n    case 1:\n      return 'low';\n\n    case 2:\n      return 'medium';\n  }\n\n  return 'high';\n};\n\nmodule.exports.cib_support = function cib_support() {\n  return Promise.resolve().then(function () {\n    if (typeof createImageBitmap === 'undefined' || typeof document === 'undefined') {\n      return false;\n    }\n\n    var c = document.createElement('canvas');\n    c.width = 100;\n    c.height = 100;\n    return createImageBitmap(c, 0, 0, 100, 100, {\n      resizeWidth: 10,\n      resizeHeight: 10,\n      resizeQuality: 'high'\n    }).then(function (bitmap) {\n      var status = bitmap.width === 10; // Branch below is filtered on upper level. We do not call resize\n      // detection for basic ImageBitmap.\n      //\n      // https://developer.mozilla.org/en-US/docs/Web/API/ImageBitmap\n      // old Crome 51 has ImageBitmap without .close(). Then this code\n      // will throw and return 'false' as expected.\n      //\n\n      bitmap.close();\n      c = null;\n      return status;\n    });\n  }).catch(function () {\n    return false;\n  });\n};\n\n},{}],13:[function(require,module,exports){\n// Web Worker wrapper for image resize function\n'use strict';\n\nmodule.exports = function () {\n  var MathLib = require('./mathlib');\n\n  var mathLib;\n  /* eslint-disable no-undef */\n\n  onmessage = function onmessage(ev) {\n    var opts = ev.data.opts;\n    if (!mathLib) mathLib = new MathLib(ev.data.features); // Use multimath's sync auto-init. Avoid Promise use in old browsers,\n    // because polyfills are not propagated to webworker.\n\n    var result = mathLib.resizeAndUnsharp(opts);\n    postMessage({\n      result: result\n    }, [result.buffer]);\n  };\n};\n\n},{\"./mathlib\":1}],14:[function(require,module,exports){\n// Calculate Gaussian blur of an image using IIR filter\n// The method is taken from Intel's white paper and code example attached to it:\n// https://software.intel.com/en-us/articles/iir-gaussian-blur-filter\n// -implementation-using-intel-advanced-vector-extensions\n\nvar a0, a1, a2, a3, b1, b2, left_corner, right_corner;\n\nfunction gaussCoef(sigma) {\n  if (sigma < 0.5) {\n    sigma = 0.5;\n  }\n\n  var a = Math.exp(0.726 * 0.726) / sigma,\n      g1 = Math.exp(-a),\n      g2 = Math.exp(-2 * a),\n      k = (1 - g1) * (1 - g1) / (1 + 2 * a * g1 - g2);\n\n  a0 = k;\n  a1 = k * (a - 1) * g1;\n  a2 = k * (a + 1) * g1;\n  a3 = -k * g2;\n  b1 = 2 * g1;\n  b2 = -g2;\n  left_corner = (a0 + a1) / (1 - b1 - b2);\n  right_corner = (a2 + a3) / (1 - b1 - b2);\n\n  // Attempt to force type to FP32.\n  return new Float32Array([ a0, a1, a2, a3, b1, b2, left_corner, right_corner ]);\n}\n\nfunction convolveMono16(src, out, line, coeff, width, height) {\n  // takes src image and writes the blurred and transposed result into out\n\n  var prev_src, curr_src, curr_out, prev_out, prev_prev_out;\n  var src_index, out_index, line_index;\n  var i, j;\n  var coeff_a0, coeff_a1, coeff_b1, coeff_b2;\n\n  for (i = 0; i < height; i++) {\n    src_index = i * width;\n    out_index = i;\n    line_index = 0;\n\n    // left to right\n    prev_src = src[src_index];\n    prev_prev_out = prev_src * coeff[6];\n    prev_out = prev_prev_out;\n\n    coeff_a0 = coeff[0];\n    coeff_a1 = coeff[1];\n    coeff_b1 = coeff[4];\n    coeff_b2 = coeff[5];\n\n    for (j = 0; j < width; j++) {\n      curr_src = src[src_index];\n\n      curr_out = curr_src * coeff_a0 +\n                 prev_src * coeff_a1 +\n                 prev_out * coeff_b1 +\n                 prev_prev_out * coeff_b2;\n\n      prev_prev_out = prev_out;\n      prev_out = curr_out;\n      prev_src = curr_src;\n\n      line[line_index] = prev_out;\n      line_index++;\n      src_index++;\n    }\n\n    src_index--;\n    line_index--;\n    out_index += height * (width - 1);\n\n    // right to left\n    prev_src = src[src_index];\n    prev_prev_out = prev_src * coeff[7];\n    prev_out = prev_prev_out;\n    curr_src = prev_src;\n\n    coeff_a0 = coeff[2];\n    coeff_a1 = coeff[3];\n\n    for (j = width - 1; j >= 0; j--) {\n      curr_out = curr_src * coeff_a0 +\n                 prev_src * coeff_a1 +\n                 prev_out * coeff_b1 +\n                 prev_prev_out * coeff_b2;\n\n      prev_prev_out = prev_out;\n      prev_out = curr_out;\n\n      prev_src = curr_src;\n      curr_src = src[src_index];\n\n      out[out_index] = line[line_index] + prev_out;\n\n      src_index--;\n      line_index--;\n      out_index -= height;\n    }\n  }\n}\n\n\nfunction blurMono16(src, width, height, radius) {\n  // Quick exit on zero radius\n  if (!radius) { return; }\n\n  var out      = new Uint16Array(src.length),\n      tmp_line = new Float32Array(Math.max(width, height));\n\n  var coeff = gaussCoef(radius);\n\n  convolveMono16(src, out, tmp_line, coeff, width, height, radius);\n  convolveMono16(out, src, tmp_line, coeff, height, width, radius);\n}\n\nmodule.exports = blurMono16;\n\n},{}],15:[function(require,module,exports){\nif (typeof Object.create === 'function') {\n  // implementation from standard node.js 'util' module\n  module.exports = function inherits(ctor, superCtor) {\n    ctor.super_ = superCtor\n    ctor.prototype = Object.create(superCtor.prototype, {\n      constructor: {\n        value: ctor,\n        enumerable: false,\n        writable: true,\n        configurable: true\n      }\n    });\n  };\n} else {\n  // old school shim for old browsers\n  module.exports = function inherits(ctor, superCtor) {\n    ctor.super_ = superCtor\n    var TempCtor = function () {}\n    TempCtor.prototype = superCtor.prototype\n    ctor.prototype = new TempCtor()\n    ctor.prototype.constructor = ctor\n  }\n}\n\n},{}],16:[function(require,module,exports){\n'use strict';\n\n\nvar assign         = require('object-assign');\nvar base64decode   = require('./lib/base64decode');\nvar hasWebAssembly = require('./lib/wa_detect');\n\n\nvar DEFAULT_OPTIONS = {\n  js: true,\n  wasm: true\n};\n\n\nfunction MultiMath(options) {\n  if (!(this instanceof MultiMath)) return new MultiMath(options);\n\n  var opts = assign({}, DEFAULT_OPTIONS, options || {});\n\n  this.options         = opts;\n\n  this.__cache         = {};\n  this.has_wasm        = hasWebAssembly();\n\n  this.__init_promise  = null;\n  this.__modules       = opts.modules || {};\n  this.__memory        = null;\n  this.__wasm          = {};\n\n  this.__isLE = ((new Uint32Array((new Uint8Array([ 1, 0, 0, 0 ])).buffer))[0] === 1);\n\n  if (!this.options.js && !this.options.wasm) {\n    throw new Error('mathlib: at least \"js\" or \"wasm\" should be enabled');\n  }\n}\n\n\nMultiMath.prototype.use = function (module) {\n  this.__modules[module.name] = module;\n\n  // Pin the best possible implementation\n  if (!this.has_wasm || !this.options.wasm || !module.wasm_fn) {\n    this[module.name] = module.fn;\n  } else {\n    this[module.name] = module.wasm_fn;\n  }\n\n  return this;\n};\n\n\nMultiMath.prototype.init = function () {\n  if (this.__init_promise) return this.__init_promise;\n\n  if (!this.options.js && this.options.wasm && !this.has_wasm) {\n    return Promise.reject(new Error('mathlib: only \"wasm\" was enabled, but it\\'s not supported'));\n  }\n\n  var self = this;\n\n  this.__init_promise = Promise.all(Object.keys(self.__modules).map(function (name) {\n    var module = self.__modules[name];\n\n    if (!self.has_wasm || !self.options.wasm || !module.wasm_fn) return null;\n\n    // If already compiled - exit\n    if (self.__wasm[name]) return null;\n\n    // Compile wasm source\n    return WebAssembly.compile(self.__base64decode(module.wasm_src))\n      .then(function (m) { self.__wasm[name] = m; });\n  }))\n    .then(function () { return self; });\n\n  return this.__init_promise;\n};\n\n\n////////////////////////////////////////////////////////////////////////////////\n// Methods below are for internal use from plugins\n\n\n// Simple decode base64 to typed array. Useful to load embedded webassembly\n// code. You probably don't need to call this method directly.\n//\nMultiMath.prototype.__base64decode = base64decode;\n\n\n// Increase current memory to include specified number of bytes. Do nothing if\n// size is already ok. You probably don't need to call this method directly,\n// because it will be invoked from `.__instance()`.\n//\nMultiMath.prototype.__reallocate = function mem_grow_to(bytes) {\n  if (!this.__memory) {\n    this.__memory = new WebAssembly.Memory({\n      initial: Math.ceil(bytes / (64 * 1024))\n    });\n    return this.__memory;\n  }\n\n  var mem_size = this.__memory.buffer.byteLength;\n\n  if (mem_size < bytes) {\n    this.__memory.grow(Math.ceil((bytes - mem_size) / (64 * 1024)));\n  }\n\n  return this.__memory;\n};\n\n\n// Returns instantinated webassembly item by name, with specified memory size\n// and environment.\n// - use cache if available\n// - do sync module init, if async init was not called earlier\n// - allocate memory if not enougth\n// - can export functions to webassembly via \"env_extra\",\n//   for example, { exp: Math.exp }\n//\nMultiMath.prototype.__instance = function instance(name, memsize, env_extra) {\n  if (memsize) this.__reallocate(memsize);\n\n  // If .init() was not called, do sync compile\n  if (!this.__wasm[name]) {\n    var module = this.__modules[name];\n    this.__wasm[name] = new WebAssembly.Module(this.__base64decode(module.wasm_src));\n  }\n\n  if (!this.__cache[name]) {\n    var env_base = {\n      memoryBase: 0,\n      memory: this.__memory,\n      tableBase: 0,\n      table: new WebAssembly.Table({ initial: 0, element: 'anyfunc' })\n    };\n\n    this.__cache[name] = new WebAssembly.Instance(this.__wasm[name], {\n      env: assign(env_base, env_extra || {})\n    });\n  }\n\n  return this.__cache[name];\n};\n\n\n// Helper to calculate memory aligh for pointers. Webassembly does not require\n// this, but you may wish to experiment. Default base = 8;\n//\nMultiMath.prototype.__align = function align(number, base) {\n  base = base || 8;\n  var reminder = number % base;\n  return number + (reminder ? base - reminder : 0);\n};\n\n\nmodule.exports = MultiMath;\n\n},{\"./lib/base64decode\":17,\"./lib/wa_detect\":23,\"object-assign\":24}],17:[function(require,module,exports){\n// base64 decode str -> Uint8Array, to load WA modules\n//\n'use strict';\n\n\nvar BASE64_MAP = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/';\n\n\nmodule.exports = function base64decode(str) {\n  var input = str.replace(/[\\r\\n=]/g, ''), // remove CR/LF & padding to simplify scan\n      max   = input.length;\n\n  var out = new Uint8Array((max * 3) >> 2);\n\n  // Collect by 6*4 bits (3 bytes)\n\n  var bits = 0;\n  var ptr  = 0;\n\n  for (var idx = 0; idx < max; idx++) {\n    if ((idx % 4 === 0) && idx) {\n      out[ptr++] = (bits >> 16) & 0xFF;\n      out[ptr++] = (bits >> 8) & 0xFF;\n      out[ptr++] = bits & 0xFF;\n    }\n\n    bits = (bits << 6) | BASE64_MAP.indexOf(input.charAt(idx));\n  }\n\n  // Dump tail\n\n  var tailbits = (max % 4) * 6;\n\n  if (tailbits === 0) {\n    out[ptr++] = (bits >> 16) & 0xFF;\n    out[ptr++] = (bits >> 8) & 0xFF;\n    out[ptr++] = bits & 0xFF;\n  } else if (tailbits === 18) {\n    out[ptr++] = (bits >> 10) & 0xFF;\n    out[ptr++] = (bits >> 2) & 0xFF;\n  } else if (tailbits === 12) {\n    out[ptr++] = (bits >> 4) & 0xFF;\n  }\n\n  return out;\n};\n\n},{}],18:[function(require,module,exports){\n// Calculates 16-bit precision HSL lightness from 8-bit rgba buffer\n//\n'use strict';\n\n\nmodule.exports = function hsl_l16_js(img, width, height) {\n  var size = width * height;\n  var out = new Uint16Array(size);\n  var r, g, b, min, max;\n  for (var i = 0; i < size; i++) {\n    r = img[4 * i];\n    g = img[4 * i + 1];\n    b = img[4 * i + 2];\n    max = (r >= g && r >= b) ? r : (g >= b && g >= r) ? g : b;\n    min = (r <= g && r <= b) ? r : (g <= b && g <= r) ? g : b;\n    out[i] = (max + min) * 257 >> 1;\n  }\n  return out;\n};\n\n},{}],19:[function(require,module,exports){\n'use strict';\n\nmodule.exports = {\n  name:     'unsharp_mask',\n  fn:       require('./unsharp_mask'),\n  wasm_fn:  require('./unsharp_mask_wasm'),\n  wasm_src: require('./unsharp_mask_wasm_base64')\n};\n\n},{\"./unsharp_mask\":20,\"./unsharp_mask_wasm\":21,\"./unsharp_mask_wasm_base64\":22}],20:[function(require,module,exports){\n// Unsharp mask filter\n//\n// http://stackoverflow.com/a/23322820/1031804\n// USM(O) = O + (2 * (Amount / 100) * (O - GB))\n// GB - gaussian blur.\n//\n// Image is converted from RGB to HSL, unsharp mask is applied to the\n// lightness channel and then image is converted back to RGB.\n//\n'use strict';\n\n\nvar glur_mono16 = require('glur/mono16');\nvar hsl_l16     = require('./hsl_l16');\n\n\nmodule.exports = function unsharp(img, width, height, amount, radius, threshold) {\n  var r, g, b;\n  var h, s, l;\n  var min, max;\n  var m1, m2, hShifted;\n  var diff, iTimes4;\n\n  if (amount === 0 || radius < 0.5) {\n    return;\n  }\n  if (radius > 2.0) {\n    radius = 2.0;\n  }\n\n  var lightness = hsl_l16(img, width, height);\n\n  var blured = new Uint16Array(lightness); // copy, because blur modify src\n\n  glur_mono16(blured, width, height, radius);\n\n  var amountFp = (amount / 100 * 0x1000 + 0.5)|0;\n  var thresholdFp = (threshold * 257)|0;\n\n  var size = width * height;\n\n  /* eslint-disable indent */\n  for (var i = 0; i < size; i++) {\n    diff = 2 * (lightness[i] - blured[i]);\n\n    if (Math.abs(diff) >= thresholdFp) {\n      iTimes4 = i * 4;\n      r = img[iTimes4];\n      g = img[iTimes4 + 1];\n      b = img[iTimes4 + 2];\n\n      // convert RGB to HSL\n      // take RGB, 8-bit unsigned integer per each channel\n      // save HSL, H and L are 16-bit unsigned integers, S is 12-bit unsigned integer\n      // math is taken from here: http://www.easyrgb.com/index.php?X=MATH&H=18\n      // and adopted to be integer (fixed point in fact) for sake of performance\n      max = (r >= g && r >= b) ? r : (g >= r && g >= b) ? g : b; // min and max are in [0..0xff]\n      min = (r <= g && r <= b) ? r : (g <= r && g <= b) ? g : b;\n      l = (max + min) * 257 >> 1; // l is in [0..0xffff] that is caused by multiplication by 257\n\n      if (min === max) {\n        h = s = 0;\n      } else {\n        s = (l <= 0x7fff) ?\n          (((max - min) * 0xfff) / (max + min))|0 :\n          (((max - min) * 0xfff) / (2 * 0xff - max - min))|0; // s is in [0..0xfff]\n        // h could be less 0, it will be fixed in backward conversion to RGB, |h| <= 0xffff / 6\n        h = (r === max) ? (((g - b) * 0xffff) / (6 * (max - min)))|0\n          : (g === max) ? 0x5555 + ((((b - r) * 0xffff) / (6 * (max - min)))|0) // 0x5555 == 0xffff / 3\n          : 0xaaaa + ((((r - g) * 0xffff) / (6 * (max - min)))|0); // 0xaaaa == 0xffff * 2 / 3\n      }\n\n      // add unsharp mask mask to the lightness channel\n      l += (amountFp * diff + 0x800) >> 12;\n      if (l > 0xffff) {\n        l = 0xffff;\n      } else if (l < 0) {\n        l = 0;\n      }\n\n      // convert HSL back to RGB\n      // for information about math look above\n      if (s === 0) {\n        r = g = b = l >> 8;\n      } else {\n        m2 = (l <= 0x7fff) ? (l * (0x1000 + s) + 0x800) >> 12 :\n          l  + (((0xffff - l) * s + 0x800) >>  12);\n        m1 = 2 * l - m2 >> 8;\n        m2 >>= 8;\n        // save result to RGB channels\n        // R channel\n        hShifted = (h + 0x5555) & 0xffff; // 0x5555 == 0xffff / 3\n        r = (hShifted >= 0xaaaa) ? m1 // 0xaaaa == 0xffff * 2 / 3\n          : (hShifted >= 0x7fff) ?  m1 + ((m2 - m1) * 6 * (0xaaaa - hShifted) + 0x8000 >> 16)\n          : (hShifted >= 0x2aaa) ? m2 // 0x2aaa == 0xffff / 6\n          : m1 + ((m2 - m1) * 6 * hShifted + 0x8000 >> 16);\n        // G channel\n        hShifted = h & 0xffff;\n        g = (hShifted >= 0xaaaa) ? m1 // 0xaaaa == 0xffff * 2 / 3\n          : (hShifted >= 0x7fff) ?  m1 + ((m2 - m1) * 6 * (0xaaaa - hShifted) + 0x8000 >> 16)\n          : (hShifted >= 0x2aaa) ? m2 // 0x2aaa == 0xffff / 6\n          : m1 + ((m2 - m1) * 6 * hShifted + 0x8000 >> 16);\n        // B channel\n        hShifted = (h - 0x5555) & 0xffff;\n        b = (hShifted >= 0xaaaa) ? m1 // 0xaaaa == 0xffff * 2 / 3\n          : (hShifted >= 0x7fff) ?  m1 + ((m2 - m1) * 6 * (0xaaaa - hShifted) + 0x8000 >> 16)\n          : (hShifted >= 0x2aaa) ? m2 // 0x2aaa == 0xffff / 6\n          : m1 + ((m2 - m1) * 6 * hShifted + 0x8000 >> 16);\n      }\n\n      img[iTimes4] = r;\n      img[iTimes4 + 1] = g;\n      img[iTimes4 + 2] = b;\n    }\n  }\n};\n\n},{\"./hsl_l16\":18,\"glur/mono16\":14}],21:[function(require,module,exports){\n'use strict';\n\n\nmodule.exports = function unsharp(img, width, height, amount, radius, threshold) {\n  if (amount === 0 || radius < 0.5) {\n    return;\n  }\n\n  if (radius > 2.0) {\n    radius = 2.0;\n  }\n\n  var pixels = width * height;\n\n  var img_bytes_cnt        = pixels * 4;\n  var hsl_bytes_cnt        = pixels * 2;\n  var blur_bytes_cnt       = pixels * 2;\n  var blur_line_byte_cnt   = Math.max(width, height) * 4; // float32 array\n  var blur_coeffs_byte_cnt = 8 * 4; // float32 array\n\n  var img_offset         = 0;\n  var hsl_offset         = img_bytes_cnt;\n  var blur_offset        = hsl_offset + hsl_bytes_cnt;\n  var blur_tmp_offset    = blur_offset + blur_bytes_cnt;\n  var blur_line_offset   = blur_tmp_offset + blur_bytes_cnt;\n  var blur_coeffs_offset = blur_line_offset + blur_line_byte_cnt;\n\n  var instance = this.__instance(\n    'unsharp_mask',\n    img_bytes_cnt + hsl_bytes_cnt + blur_bytes_cnt * 2 + blur_line_byte_cnt + blur_coeffs_byte_cnt,\n    { exp: Math.exp }\n  );\n\n  // 32-bit copy is much faster in chrome\n  var img32 = new Uint32Array(img.buffer);\n  var mem32 = new Uint32Array(this.__memory.buffer);\n  mem32.set(img32);\n\n  // HSL\n  var fn = instance.exports.hsl_l16 || instance.exports._hsl_l16;\n  fn(img_offset, hsl_offset, width, height);\n\n  // BLUR\n  fn = instance.exports.blurMono16 || instance.exports._blurMono16;\n  fn(hsl_offset, blur_offset, blur_tmp_offset,\n    blur_line_offset, blur_coeffs_offset, width, height, radius);\n\n  // UNSHARP\n  fn = instance.exports.unsharp || instance.exports._unsharp;\n  fn(img_offset, img_offset, hsl_offset,\n    blur_offset, width, height, amount, threshold);\n\n  // 32-bit copy is much faster in chrome\n  img32.set(new Uint32Array(this.__memory.buffer, 0, pixels));\n};\n\n},{}],22:[function(require,module,exports){\n// This is autogenerated file from math.wasm, don't edit.\n//\n'use strict';\n\n/* eslint-disable max-len */\nmodule.exports = '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';\n\n},{}],23:[function(require,module,exports){\n// Detect WebAssembly support.\n// - Check global WebAssembly object\n// - Try to load simple module (can be disabled via CSP)\n//\n'use strict';\n\n\nvar wa;\n\n\nmodule.exports = function hasWebAssembly() {\n  // use cache if called before;\n  if (typeof wa !== 'undefined') return wa;\n\n  wa = false;\n\n  if (typeof WebAssembly === 'undefined') return wa;\n\n  // If WebAssenbly is disabled, code can throw on compile\n  try {\n    // https://github.com/brion/min-wasm-fail/blob/master/min-wasm-fail.in.js\n    // Additional check that WA internals are correct\n\n    /* eslint-disable comma-spacing, max-len */\n    var bin      = new Uint8Array([ 0,97,115,109,1,0,0,0,1,6,1,96,1,127,1,127,3,2,1,0,5,3,1,0,1,7,8,1,4,116,101,115,116,0,0,10,16,1,14,0,32,0,65,1,54,2,0,32,0,40,2,0,11 ]);\n    var module   = new WebAssembly.Module(bin);\n    var instance = new WebAssembly.Instance(module, {});\n\n    // test storing to and loading from a non-zero location via a parameter.\n    // Safari on iOS 11.2.5 returns 0 unexpectedly at non-zero locations\n    if (instance.exports.test(4) !== 0) wa = true;\n\n    return wa;\n  } catch (__) {}\n\n  return wa;\n};\n\n},{}],24:[function(require,module,exports){\n/*\nobject-assign\n(c) Sindre Sorhus\n@license MIT\n*/\n\n'use strict';\n/* eslint-disable no-unused-vars */\nvar getOwnPropertySymbols = Object.getOwnPropertySymbols;\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\nvar propIsEnumerable = Object.prototype.propertyIsEnumerable;\n\nfunction toObject(val) {\n\tif (val === null || val === undefined) {\n\t\tthrow new TypeError('Object.assign cannot be called with null or undefined');\n\t}\n\n\treturn Object(val);\n}\n\nfunction shouldUseNative() {\n\ttry {\n\t\tif (!Object.assign) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Detect buggy property enumeration order in older V8 versions.\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=4118\n\t\tvar test1 = new String('abc');  // eslint-disable-line no-new-wrappers\n\t\ttest1[5] = 'de';\n\t\tif (Object.getOwnPropertyNames(test1)[0] === '5') {\n\t\t\treturn false;\n\t\t}\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\t\tvar test2 = {};\n\t\tfor (var i = 0; i < 10; i++) {\n\t\t\ttest2['_' + String.fromCharCode(i)] = i;\n\t\t}\n\t\tvar order2 = Object.getOwnPropertyNames(test2).map(function (n) {\n\t\t\treturn test2[n];\n\t\t});\n\t\tif (order2.join('') !== '0123456789') {\n\t\t\treturn false;\n\t\t}\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\t\tvar test3 = {};\n\t\t'abcdefghijklmnopqrst'.split('').forEach(function (letter) {\n\t\t\ttest3[letter] = letter;\n\t\t});\n\t\tif (Object.keys(Object.assign({}, test3)).join('') !==\n\t\t\t\t'abcdefghijklmnopqrst') {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn true;\n\t} catch (err) {\n\t\t// We don't expect any of the above to throw, but better to be safe.\n\t\treturn false;\n\t}\n}\n\nmodule.exports = shouldUseNative() ? Object.assign : function (target, source) {\n\tvar from;\n\tvar to = toObject(target);\n\tvar symbols;\n\n\tfor (var s = 1; s < arguments.length; s++) {\n\t\tfrom = Object(arguments[s]);\n\n\t\tfor (var key in from) {\n\t\t\tif (hasOwnProperty.call(from, key)) {\n\t\t\t\tto[key] = from[key];\n\t\t\t}\n\t\t}\n\n\t\tif (getOwnPropertySymbols) {\n\t\t\tsymbols = getOwnPropertySymbols(from);\n\t\t\tfor (var i = 0; i < symbols.length; i++) {\n\t\t\t\tif (propIsEnumerable.call(from, symbols[i])) {\n\t\t\t\t\tto[symbols[i]] = from[symbols[i]];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn to;\n};\n\n},{}],25:[function(require,module,exports){\nvar bundleFn = arguments[3];\nvar sources = arguments[4];\nvar cache = arguments[5];\n\nvar stringify = JSON.stringify;\n\nmodule.exports = function (fn, options) {\n    var wkey;\n    var cacheKeys = Object.keys(cache);\n\n    for (var i = 0, l = cacheKeys.length; i < l; i++) {\n        var key = cacheKeys[i];\n        var exp = cache[key].exports;\n        // Using babel as a transpiler to use esmodule, the export will always\n        // be an object with the default export as a property of it. To ensure\n        // the existing api and babel esmodule exports are both supported we\n        // check for both\n        if (exp === fn || exp && exp.default === fn) {\n            wkey = key;\n            break;\n        }\n    }\n\n    if (!wkey) {\n        wkey = Math.floor(Math.pow(16, 8) * Math.random()).toString(16);\n        var wcache = {};\n        for (var i = 0, l = cacheKeys.length; i < l; i++) {\n            var key = cacheKeys[i];\n            wcache[key] = key;\n        }\n        sources[wkey] = [\n            'function(require,module,exports){' + fn + '(self); }',\n            wcache\n        ];\n    }\n    var skey = Math.floor(Math.pow(16, 8) * Math.random()).toString(16);\n\n    var scache = {}; scache[wkey] = wkey;\n    sources[skey] = [\n        'function(require,module,exports){' +\n            // try to call default if defined to also support babel esmodule exports\n            'var f = require(' + stringify(wkey) + ');' +\n            '(f.default ? f.default : f)(self);' +\n        '}',\n        scache\n    ];\n\n    var workerSources = {};\n    resolveSources(skey);\n\n    function resolveSources(key) {\n        workerSources[key] = true;\n\n        for (var depPath in sources[key][1]) {\n            var depKey = sources[key][1][depPath];\n            if (!workerSources[depKey]) {\n                resolveSources(depKey);\n            }\n        }\n    }\n\n    var src = '(' + bundleFn + ')({'\n        + Object.keys(workerSources).map(function (key) {\n            return stringify(key) + ':['\n                + sources[key][0]\n                + ',' + stringify(sources[key][1]) + ']'\n            ;\n        }).join(',')\n        + '},{},[' + stringify(skey) + '])'\n    ;\n\n    var URL = window.URL || window.webkitURL || window.mozURL || window.msURL;\n\n    var blob = new Blob([src], { type: 'text/javascript' });\n    if (options && options.bare) { return blob; }\n    var workerUrl = URL.createObjectURL(blob);\n    var worker = new Worker(workerUrl);\n    worker.objectURL = workerUrl;\n    return worker;\n};\n\n},{}],\"/\":[function(require,module,exports){\n'use strict';\n\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); }\n\nfunction _iterableToArrayLimit(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nvar assign = require('object-assign');\n\nvar webworkify = require('webworkify');\n\nvar MathLib = require('./lib/mathlib');\n\nvar Pool = require('./lib/pool');\n\nvar utils = require('./lib/utils');\n\nvar worker = require('./lib/worker');\n\nvar createStages = require('./lib/stepper');\n\nvar createRegions = require('./lib/tiler'); // Deduplicate pools & limiters with the same configs\n// when user creates multiple pica instances.\n\n\nvar singletones = {};\nvar NEED_SAFARI_FIX = false;\n\ntry {\n  if (typeof navigator !== 'undefined' && navigator.userAgent) {\n    NEED_SAFARI_FIX = navigator.userAgent.indexOf('Safari') >= 0;\n  }\n} catch (e) {}\n\nvar concurrency = 1;\n\nif (typeof navigator !== 'undefined') {\n  concurrency = Math.min(navigator.hardwareConcurrency || 1, 4);\n}\n\nvar DEFAULT_PICA_OPTS = {\n  tile: 1024,\n  concurrency: concurrency,\n  features: ['js', 'wasm', 'ww'],\n  idle: 2000\n};\nvar DEFAULT_RESIZE_OPTS = {\n  quality: 3,\n  alpha: false,\n  unsharpAmount: 0,\n  unsharpRadius: 0.0,\n  unsharpThreshold: 0\n};\nvar CAN_NEW_IMAGE_DATA;\nvar CAN_CREATE_IMAGE_BITMAP;\n\nfunction workerFabric() {\n  return {\n    value: webworkify(worker),\n    destroy: function destroy() {\n      this.value.terminate();\n\n      if (typeof window !== 'undefined') {\n        var url = window.URL || window.webkitURL || window.mozURL || window.msURL;\n\n        if (url && url.revokeObjectURL && this.value.objectURL) {\n          url.revokeObjectURL(this.value.objectURL);\n        }\n      }\n    }\n  };\n} ////////////////////////////////////////////////////////////////////////////////\n// API methods\n\n\nfunction Pica(options) {\n  if (!(this instanceof Pica)) return new Pica(options);\n  this.options = assign({}, DEFAULT_PICA_OPTS, options || {});\n  var limiter_key = \"lk_\".concat(this.options.concurrency); // Share limiters to avoid multiple parallel workers when user creates\n  // multiple pica instances.\n\n  this.__limit = singletones[limiter_key] || utils.limiter(this.options.concurrency);\n  if (!singletones[limiter_key]) singletones[limiter_key] = this.__limit; // List of supported features, according to options & browser/node.js\n\n  this.features = {\n    js: false,\n    // pure JS implementation, can be disabled for testing\n    wasm: false,\n    // webassembly implementation for heavy functions\n    cib: false,\n    // resize via createImageBitmap (only FF at this moment)\n    ww: false // webworkers\n\n  };\n  this.__workersPool = null; // Store requested features for webworkers\n\n  this.__requested_features = [];\n  this.__mathlib = null;\n}\n\nPica.prototype.init = function () {\n  var _this = this;\n\n  if (this.__initPromise) return this.__initPromise; // Test if we can create ImageData without canvas and memory copy\n\n  if (CAN_NEW_IMAGE_DATA !== false && CAN_NEW_IMAGE_DATA !== true) {\n    CAN_NEW_IMAGE_DATA = false;\n\n    if (typeof ImageData !== 'undefined' && typeof Uint8ClampedArray !== 'undefined') {\n      try {\n        /* eslint-disable no-new */\n        new ImageData(new Uint8ClampedArray(400), 10, 10);\n        CAN_NEW_IMAGE_DATA = true;\n      } catch (__) {}\n    }\n  } // ImageBitmap can be effective in 2 places:\n  //\n  // 1. Threaded jpeg unpack (basic)\n  // 2. Built-in resize (blocked due problem in chrome, see issue #89)\n  //\n  // For basic use we also need ImageBitmap wo support .close() method,\n  // see https://developer.mozilla.org/ru/docs/Web/API/ImageBitmap\n\n\n  if (CAN_CREATE_IMAGE_BITMAP !== false && CAN_CREATE_IMAGE_BITMAP !== true) {\n    CAN_CREATE_IMAGE_BITMAP = false;\n\n    if (typeof ImageBitmap !== 'undefined') {\n      if (ImageBitmap.prototype && ImageBitmap.prototype.close) {\n        CAN_CREATE_IMAGE_BITMAP = true;\n      } else {\n        this.debug('ImageBitmap does not support .close(), disabled');\n      }\n    }\n  }\n\n  var features = this.options.features.slice();\n\n  if (features.indexOf('all') >= 0) {\n    features = ['cib', 'wasm', 'js', 'ww'];\n  }\n\n  this.__requested_features = features;\n  this.__mathlib = new MathLib(features); // Check WebWorker support if requested\n\n  if (features.indexOf('ww') >= 0) {\n    if (typeof window !== 'undefined' && 'Worker' in window) {\n      // IE <= 11 don't allow to create webworkers from string. We should check it.\n      // https://connect.microsoft.com/IE/feedback/details/801810/web-workers-from-blob-urls-in-ie-10-and-11\n      try {\n        var wkr = require('webworkify')(function () {});\n\n        wkr.terminate();\n        this.features.ww = true; // pool uniqueness depends on pool config + webworker config\n\n        var wpool_key = \"wp_\".concat(JSON.stringify(this.options));\n\n        if (singletones[wpool_key]) {\n          this.__workersPool = singletones[wpool_key];\n        } else {\n          this.__workersPool = new Pool(workerFabric, this.options.idle);\n          singletones[wpool_key] = this.__workersPool;\n        }\n      } catch (__) {}\n    }\n  }\n\n  var initMath = this.__mathlib.init().then(function (mathlib) {\n    // Copy detected features\n    assign(_this.features, mathlib.features);\n  });\n\n  var checkCibResize;\n\n  if (!CAN_CREATE_IMAGE_BITMAP) {\n    checkCibResize = Promise.resolve(false);\n  } else {\n    checkCibResize = utils.cib_support().then(function (status) {\n      if (_this.features.cib && features.indexOf('cib') < 0) {\n        _this.debug('createImageBitmap() resize supported, but disabled by config');\n\n        return;\n      }\n\n      if (features.indexOf('cib') >= 0) _this.features.cib = status;\n    });\n  } // Init math lib. That's async because can load some\n\n\n  this.__initPromise = Promise.all([initMath, checkCibResize]).then(function () {\n    return _this;\n  });\n  return this.__initPromise;\n};\n\nPica.prototype.resize = function (from, to, options) {\n  var _this2 = this;\n\n  this.debug('Start resize...');\n  var opts = assign({}, DEFAULT_RESIZE_OPTS);\n\n  if (!isNaN(options)) {\n    opts = assign(opts, {\n      quality: options\n    });\n  } else if (options) {\n    opts = assign(opts, options);\n  }\n\n  opts.toWidth = to.width;\n  opts.toHeight = to.height;\n  opts.width = from.naturalWidth || from.width;\n  opts.height = from.naturalHeight || from.height; // Prevent stepper from infinite loop\n\n  if (to.width === 0 || to.height === 0) {\n    return Promise.reject(new Error(\"Invalid output size: \".concat(to.width, \"x\").concat(to.height)));\n  }\n\n  if (opts.unsharpRadius > 2) opts.unsharpRadius = 2;\n  var canceled = false;\n  var cancelToken = null;\n\n  if (opts.cancelToken) {\n    // Wrap cancelToken to avoid successive resolve & set flag\n    cancelToken = opts.cancelToken.then(function (data) {\n      canceled = true;\n      throw data;\n    }, function (err) {\n      canceled = true;\n      throw err;\n    });\n  }\n\n  var DEST_TILE_BORDER = 3; // Max possible filter window size\n\n  var destTileBorder = Math.ceil(Math.max(DEST_TILE_BORDER, 2.5 * opts.unsharpRadius | 0));\n  return this.init().then(function () {\n    if (canceled) return cancelToken; // if createImageBitmap supports resize, just do it and return\n\n    if (_this2.features.cib) {\n      var toCtx = to.getContext('2d', {\n        alpha: Boolean(opts.alpha)\n      });\n\n      _this2.debug('Resize via createImageBitmap()');\n\n      return createImageBitmap(from, {\n        resizeWidth: opts.toWidth,\n        resizeHeight: opts.toHeight,\n        resizeQuality: utils.cib_quality_name(opts.quality)\n      }).then(function (imageBitmap) {\n        if (canceled) return cancelToken; // if no unsharp - draw directly to output canvas\n\n        if (!opts.unsharpAmount) {\n          toCtx.drawImage(imageBitmap, 0, 0);\n          imageBitmap.close();\n          toCtx = null;\n\n          _this2.debug('Finished!');\n\n          return to;\n        }\n\n        _this2.debug('Unsharp result');\n\n        var tmpCanvas = document.createElement('canvas');\n        tmpCanvas.width = opts.toWidth;\n        tmpCanvas.height = opts.toHeight;\n        var tmpCtx = tmpCanvas.getContext('2d', {\n          alpha: Boolean(opts.alpha)\n        });\n        tmpCtx.drawImage(imageBitmap, 0, 0);\n        imageBitmap.close();\n        var iData = tmpCtx.getImageData(0, 0, opts.toWidth, opts.toHeight);\n\n        _this2.__mathlib.unsharp(iData.data, opts.toWidth, opts.toHeight, opts.unsharpAmount, opts.unsharpRadius, opts.unsharpThreshold);\n\n        toCtx.putImageData(iData, 0, 0);\n        iData = tmpCtx = tmpCanvas = toCtx = null;\n\n        _this2.debug('Finished!');\n\n        return to;\n      });\n    } //\n    // No easy way, let's resize manually via arrays\n    //\n    // Share cache between calls:\n    //\n    // - wasm instance\n    // - wasm memory object\n    //\n\n\n    var cache = {}; // Call resizer in webworker or locally, depending on config\n\n    var invokeResize = function invokeResize(opts) {\n      return Promise.resolve().then(function () {\n        if (!_this2.features.ww) return _this2.__mathlib.resizeAndUnsharp(opts, cache);\n        return new Promise(function (resolve, reject) {\n          var w = _this2.__workersPool.acquire();\n\n          if (cancelToken) cancelToken.catch(function (err) {\n            return reject(err);\n          });\n\n          w.value.onmessage = function (ev) {\n            w.release();\n            if (ev.data.err) reject(ev.data.err);else resolve(ev.data.result);\n          };\n\n          w.value.postMessage({\n            opts: opts,\n            features: _this2.__requested_features,\n            preload: {\n              wasm_nodule: _this2.__mathlib.__\n            }\n          }, [opts.src.buffer]);\n        });\n      });\n    };\n\n    var tileAndResize = function tileAndResize(from, to, opts) {\n      var srcCtx;\n      var srcImageBitmap;\n      var toCtx;\n\n      var processTile = function processTile(tile) {\n        return _this2.__limit(function () {\n          if (canceled) return cancelToken;\n          var srcImageData; // Extract tile RGBA buffer, depending on input type\n\n          if (utils.isCanvas(from)) {\n            _this2.debug('Get tile pixel data'); // If input is Canvas - extract region data directly\n\n\n            srcImageData = srcCtx.getImageData(tile.x, tile.y, tile.width, tile.height);\n          } else {\n            // If input is Image or decoded to ImageBitmap,\n            // draw region to temporary canvas and extract data from it\n            //\n            // Note! Attempt to reuse this canvas causes significant slowdown in chrome\n            //\n            _this2.debug('Draw tile imageBitmap/image to temporary canvas');\n\n            var tmpCanvas = document.createElement('canvas');\n            tmpCanvas.width = tile.width;\n            tmpCanvas.height = tile.height;\n            var tmpCtx = tmpCanvas.getContext('2d', {\n              alpha: Boolean(opts.alpha)\n            });\n            tmpCtx.globalCompositeOperation = 'copy';\n            tmpCtx.drawImage(srcImageBitmap || from, tile.x, tile.y, tile.width, tile.height, 0, 0, tile.width, tile.height);\n\n            _this2.debug('Get tile pixel data');\n\n            srcImageData = tmpCtx.getImageData(0, 0, tile.width, tile.height);\n            tmpCtx = tmpCanvas = null;\n          }\n\n          var o = {\n            src: srcImageData.data,\n            width: tile.width,\n            height: tile.height,\n            toWidth: tile.toWidth,\n            toHeight: tile.toHeight,\n            scaleX: tile.scaleX,\n            scaleY: tile.scaleY,\n            offsetX: tile.offsetX,\n            offsetY: tile.offsetY,\n            quality: opts.quality,\n            alpha: opts.alpha,\n            unsharpAmount: opts.unsharpAmount,\n            unsharpRadius: opts.unsharpRadius,\n            unsharpThreshold: opts.unsharpThreshold\n          };\n\n          _this2.debug('Invoke resize math');\n\n          return Promise.resolve().then(function () {\n            return invokeResize(o);\n          }).then(function (result) {\n            if (canceled) return cancelToken;\n            srcImageData = null;\n            var toImageData;\n\n            _this2.debug('Convert raw rgba tile result to ImageData');\n\n            if (CAN_NEW_IMAGE_DATA) {\n              // this branch is for modern browsers\n              // If `new ImageData()` & Uint8ClampedArray suported\n              toImageData = new ImageData(new Uint8ClampedArray(result), tile.toWidth, tile.toHeight);\n            } else {\n              // fallback for `node-canvas` and old browsers\n              // (IE11 has ImageData but does not support `new ImageData()`)\n              toImageData = toCtx.createImageData(tile.toWidth, tile.toHeight);\n\n              if (toImageData.data.set) {\n                toImageData.data.set(result);\n              } else {\n                // IE9 don't have `.set()`\n                for (var i = toImageData.data.length - 1; i >= 0; i--) {\n                  toImageData.data[i] = result[i];\n                }\n              }\n            }\n\n            _this2.debug('Draw tile');\n\n            if (NEED_SAFARI_FIX) {\n              // Safari draws thin white stripes between tiles without this fix\n              toCtx.putImageData(toImageData, tile.toX, tile.toY, tile.toInnerX - tile.toX, tile.toInnerY - tile.toY, tile.toInnerWidth + 1e-5, tile.toInnerHeight + 1e-5);\n            } else {\n              toCtx.putImageData(toImageData, tile.toX, tile.toY, tile.toInnerX - tile.toX, tile.toInnerY - tile.toY, tile.toInnerWidth, tile.toInnerHeight);\n            }\n\n            return null;\n          });\n        });\n      }; // Need to normalize data source first. It can be canvas or image.\n      // If image - try to decode in background if possible\n\n\n      return Promise.resolve().then(function () {\n        toCtx = to.getContext('2d', {\n          alpha: Boolean(opts.alpha)\n        });\n\n        if (utils.isCanvas(from)) {\n          srcCtx = from.getContext('2d', {\n            alpha: Boolean(opts.alpha)\n          });\n          return null;\n        }\n\n        if (utils.isImage(from)) {\n          // try do decode image in background for faster next operations\n          if (!CAN_CREATE_IMAGE_BITMAP) return null;\n\n          _this2.debug('Decode image via createImageBitmap');\n\n          return createImageBitmap(from).then(function (imageBitmap) {\n            srcImageBitmap = imageBitmap;\n          });\n        }\n\n        throw new Error('\".from\" should be image or canvas');\n      }).then(function () {\n        if (canceled) return cancelToken;\n\n        _this2.debug('Calculate tiles'); //\n        // Here we are with \"normalized\" source,\n        // follow to tiling\n        //\n\n\n        var regions = createRegions({\n          width: opts.width,\n          height: opts.height,\n          srcTileSize: _this2.options.tile,\n          toWidth: opts.toWidth,\n          toHeight: opts.toHeight,\n          destTileBorder: destTileBorder\n        });\n        var jobs = regions.map(function (tile) {\n          return processTile(tile);\n        });\n\n        function cleanup() {\n          if (srcImageBitmap) {\n            srcImageBitmap.close();\n            srcImageBitmap = null;\n          }\n        }\n\n        _this2.debug('Process tiles');\n\n        return Promise.all(jobs).then(function () {\n          _this2.debug('Finished!');\n\n          cleanup();\n          return to;\n        }, function (err) {\n          cleanup();\n          throw err;\n        });\n      });\n    };\n\n    var processStages = function processStages(stages, from, to, opts) {\n      if (canceled) return cancelToken;\n\n      var _stages$shift = stages.shift(),\n          _stages$shift2 = _slicedToArray(_stages$shift, 2),\n          toWidth = _stages$shift2[0],\n          toHeight = _stages$shift2[1];\n\n      var isLastStage = stages.length === 0;\n      opts = assign({}, opts, {\n        toWidth: toWidth,\n        toHeight: toHeight,\n        // only use user-defined quality for the last stage,\n        // use simpler (Hamming) filter for the first stages where\n        // scale factor is large enough (more than 2-3)\n        quality: isLastStage ? opts.quality : Math.min(1, opts.quality)\n      });\n      var tmpCanvas;\n\n      if (!isLastStage) {\n        // create temporary canvas\n        tmpCanvas = document.createElement('canvas');\n        tmpCanvas.width = toWidth;\n        tmpCanvas.height = toHeight;\n      }\n\n      return tileAndResize(from, isLastStage ? to : tmpCanvas, opts).then(function () {\n        if (isLastStage) return to;\n        opts.width = toWidth;\n        opts.height = toHeight;\n        return processStages(stages, tmpCanvas, to, opts);\n      });\n    };\n\n    var stages = createStages(opts.width, opts.height, opts.toWidth, opts.toHeight, _this2.options.tile, destTileBorder);\n    return processStages(stages, from, to, opts);\n  });\n}; // RGBA buffer resize\n//\n\n\nPica.prototype.resizeBuffer = function (options) {\n  var _this3 = this;\n\n  var opts = assign({}, DEFAULT_RESIZE_OPTS, options);\n  return this.init().then(function () {\n    return _this3.__mathlib.resizeAndUnsharp(opts);\n  });\n};\n\nPica.prototype.toBlob = function (canvas, mimeType, quality) {\n  mimeType = mimeType || 'image/png';\n  return new Promise(function (resolve) {\n    if (canvas.toBlob) {\n      canvas.toBlob(function (blob) {\n        return resolve(blob);\n      }, mimeType, quality);\n      return;\n    } // Fallback for old browsers\n\n\n    var asString = atob(canvas.toDataURL(mimeType, quality).split(',')[1]);\n    var len = asString.length;\n    var asBuffer = new Uint8Array(len);\n\n    for (var i = 0; i < len; i++) {\n      asBuffer[i] = asString.charCodeAt(i);\n    }\n\n    resolve(new Blob([asBuffer], {\n      type: mimeType\n    }));\n  });\n};\n\nPica.prototype.debug = function () {};\n\nmodule.exports = Pica;\n\n},{\"./lib/mathlib\":1,\"./lib/pool\":9,\"./lib/stepper\":10,\"./lib/tiler\":11,\"./lib/utils\":12,\"./lib/worker\":13,\"object-assign\":24,\"webworkify\":25}]},{},[])(\"/\")\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/pica/dist/pica.js\n// module id = ftaU\n// module chunks = 0"],"sourceRoot":""}